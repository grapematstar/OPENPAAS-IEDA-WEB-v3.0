meta: ~

releases:
-  name: bosh-openstack-cpi
   version: (( meta.bosh-openstack-cpi-version ))
   url: (( meta.bosh-openstack-cpi-url ))

resource_pools:
- name: vms
  stemcell: 
    url: ((meta.stemcell-url))
  cloud_properties: 
    instance_type: m1.medium

- type: replace
  path: /networks/name=default/subnets/0/cloud_properties?
  value: {net_id: (( meta.private-network-id ))}

# Add CPI job

instance_groups:
- name: bosh
  properties:
    openstack: &openstack
      auth_url: (( meta.auth-url ))
      username: (( meta.username ))
      api_key: (( meta.api-key ))
      domain: (( meta.domain ))
      project: (( meta.project ))
      region: (( meta.region ))
      default_key_name: (( meta.default-key-name ))
      default_security_groups: (( meta.default-security-groups ))
      human_readable_vm_names: true

cloud_provider:
  properties:
    openstack: *openstack